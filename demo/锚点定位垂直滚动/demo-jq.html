<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>锚点定位垂直滚动</title>
<script src="../libs/jquery1.12.0.min.js"></script>
<script src="../libs/jquery.mousewheel.js"></script>
<script src="../libs/jquery.util.js"></script>
<style>
div, p, ul, ol, dl, dt, dd, form{padding:0; margin:0;list-style-type: none;}
#tab{position:fixed; top:0; left: 0;height:50px;background-color:#ffff00;}
#tab li{float:left;margin:5px;}
.container{}
</style>
</head>
<body>
<div id="tab">
	<ul>
		<li><a href="javascript:;">标题1</a></li>
		<li><a href="javascript:;">标题2</a></li>
		<li><a href="javascript:;">标题3</a></li>
		<li><a href="javascript:;">标题4</a></li>
		<li><a href="javascript:;">标题5</a></li>
	</ul>
</div>

<div class="container">
	<div id="a1" style="background-color:#999933;">
		<div>
			<p>我是a1</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
		</div>
	</div>
	<div id="a2" style="background-color:#336699;">
		<div>
			<p>我是a2</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
		</div>
	</div>
	<div id="a3" style="background-color:#FFCC99;">
		<div>
			<p>我是a3</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
		</div>
	</div>
	<div id="a4" style="background-color:#9966CC;">
		<div>
			<p>我是a4</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
		</div>
	</div>
	<div id="a5" style="background-color:#999999;">
		<div>
			<p>我是a5</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
			<p>sgsghdfhdfh</p>
		</div>
	</div>
</div>

<script>
var Scrollify = jutil.Class.create();
jutil.extend(Scrollify.prototype,{
	initialize:function(arrAnchor){
		this.arrTop = [];
		this.scroll = jutil.scrollTo();
			
		//遍历获取锚点的y坐标
		for(var i=0,j;j=arrAnchor[i++];){
			var y = $(j).offset().top;
			this.arrTop.push(y);
		}
	},
	wheelCtrl:function(e){
		e.preventDefault();
		e.stopPropagation();
		
		if(e.delta > 0){
			this.moveDown();
		}else{
			this.moveUp();
		}
	},
	moveUp:function(){
		for(var i=this.arrTop.length-1,j;j=this.arrTop[i--];){
			if($(window).scrollTop() > j){
				this.moveTo(j);
				break;
			} 
		}	
	},
	moveDown:function(){
		for(var i=0,j;j=this.arrTop[i++];){
			if($(window).scrollTop() < j){
				this.moveTo(j);
				break;
			} 
		}
	},
	moveTo:function(pos){
		pos = Math.min(pos,$(document).height() - $(window).height());
		this.scroll.play(pos);
	}
});


var run = function(fn){	
	$('#tab a').each(function(i){
		$(this).on("click",function(){
			fn.moveTo(fn.arrTop[i]);
		});
	});
	
	$(document).on("mousewheel", function(e){
		fn.wheelCtrl(e);
	});
};

var fn = new Scrollify(["#a1","#a2","#a3","#a4","#a5"]);
run(fn);
</script>
</body>
</html>
